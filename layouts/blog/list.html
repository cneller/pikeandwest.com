{{ define "main" }}
{{/* Blog Hero - reads from front matter, falls back to default */}}
{{ $heroPath := .Params.image | default "images/venue/venue-06-soft-seating.jpg" }}
{{ $heroImage := resources.Get $heroPath }}
{{ $heroBg := "" }}
{{ if $heroImage }}
  {{ $heroBg = ($heroImage.Resize "1920x q85").RelPermalink }}
{{ end }}

<section class="blog-hero" style="background-image: url('{{ $heroBg }}');">
  <div class="blog-hero__content">
    <h1 class="blog-hero__title">{{ .Title }}</h1>
  </div>
</section>

{{/* Breadcrumb Navigation - flush with hero */}}
{{ partial "breadcrumb.html" (dict "Page" . "accentBar" true) }}

{{/* Blog List */}}
<section class="blog-list section">
  <div class="container">
    {{ if .Pages }}
    <div class="blog-list__grid">
      {{ range (.Paginate (.Pages.ByDate.Reverse)).Pages }}
      {{ $page := . }}
      <article class="blog-card">
        {{/* Stretched link overlay - makes entire card clickable */}}
        <a href="{{ $page.RelPermalink }}" class="blog-card__link-overlay" aria-label="Read {{ $page.Title }}"></a>
        {{ with .Params.image }}
        {{ $img := $page.Resources.GetMatch . }}
        {{ if not $img }}
          {{ $img = resources.Get . }}
        {{ end }}
        {{ if $img }}
        {{ $resized := $img.Fill "600x400 q85" }}
        <div class="blog-card__image-wrapper">
          <img
            src="{{ $resized.RelPermalink }}"
            alt="{{ $page.Params.image_alt | default $page.Title }}"
            class="blog-card__image"
            loading="lazy"
          />
        </div>
        {{ end }}
        {{ end }}
        <div class="blog-card__content">
          {{ with index .Params.categories 0 }}
          <span class="blog-card__category">{{ . }}</span>
          {{ end }}
          <time class="blog-card__date" datetime="{{ .Date.Format "2006-01-02" }}">
            {{ .Date.Format "January 2, 2006" }}
          </time>
          <h2 class="blog-card__title">{{ .Title }}</h2>
          <p class="blog-card__excerpt">
            {{ with .Description }}{{ . }}{{ else }}{{ .Summary | truncate 150 }}{{ end }}
          </p>
          <span class="blog-card__link">Read More</span>
        </div>
      </article>
      {{ end }}
    </div>
    {{/* Pagination */}}
    {{ partial "pagination.html" . }}
    {{ else }}
    <p class="blog-list__empty">No blog posts yet. Check back soon!</p>
    {{ end }}
  </div>
</section>
{{ end }}

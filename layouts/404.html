{{- /*
  404 Error Page Template

  Purpose: Custom branded 404 page for Pike & West
  Context: Hugo automatically uses this for 404 responses

  Design: Hero-style layout with venue background, elegant
  messaging, and multiple navigation options.

  SEO: Title and description are handled in head.html via .Kind == "404" check.
  This ensures proper "Page Not Found | Pike & West" title and custom description.
*/ -}}

{{- define "main" -}}
{{- $data := site.Data.error404 -}}

{{- /* Process background image with WebP */ -}}
{{- $bgImage := resources.Get $data.background_image -}}
{{- $bgUrlJpg := "" -}}
{{- $bgUrlWebp := "" -}}
{{- if $bgImage -}}
  {{- $bgUrlJpg = ($bgImage.Resize "1920x jpg q85").RelPermalink -}}
  {{- $bgUrlWebp = ($bgImage.Resize "1920x webp q85").RelPermalink -}}
{{- end -}}

<section class="error-404">
  {{- /* Inline CSS for background image with WebP support */ -}}
  <style>
    .error-404 {
      background-image: url('{{ $bgUrlJpg }}');
    }
    @supports (background-image: url('test.webp')) {
      .error-404 {
        background-image: url('{{ $bgUrlWebp }}');
      }
    }
  </style>

  <div class="error-404__content">
    {{- /* Headline */ -}}
    <h1 class="error-404__headline">{{ $data.headline }}</h1>

    {{- /* Tagline - Pike & West cadence */ -}}
    <div class="error-404__tagline">
      {{- range $i, $line := $data.tagline -}}
        {{- if $i }}<br>{{ end -}}
        {{ $line }}
      {{- end -}}
    </div>

    {{- /* Friendly message */ -}}
    <p class="error-404__message">{{ $data.message }}</p>

    {{- /* Primary CTA */ -}}
    <div class="error-404__cta-primary">
      <a href="{{ $data.cta_primary.link }}" class="btn btn-secondary">
        {{ $data.cta_primary.text }}
      </a>
    </div>

    {{- /* Secondary navigation links */ -}}
    <nav class="error-404__cta-secondary" aria-label="Alternative navigation">
      {{- range $data.cta_secondary -}}
        <a href="{{ .link }}" class="error-404__link">{{ .text }}</a>
      {{- end -}}
    </nav>
  </div>
</section>
{{- end -}}

{{ define "main" }} {{/* Contact Form Section */}}
<section class="contact-form section">
  <div class="container">
    <h1 class="section-title">CONTACT US</h1>
    <address class="form-embed">
      {{ with .Site.Params.forms.contactEmbed }}
      {{/* Facade pattern: static preview loads iframe on interaction */}}
      {{ partial "contact-form-facade.html" $ }}
      {{ else }}
      <p>
        Contact form coming soon. Please call us at {{
        .Site.Params.contact.phone }}.
      </p>
      {{ end }}
    </address>
  </div>
</section>

{{/* Find Us Section */}}
<section class="find-us section">
  <div class="container">
    <h2 class="section-title">FIND US</h2>
    <div class="find-us__grid">
      <address class="find-us__map">
        {{ with .Site.Params.maps.embed }}
        {{/* Lazy-loaded map iframe with placeholder */}}
        <div class="iframe-lazy iframe-lazy--map" data-src="{{ . }}" data-title="Pike & West Location">
          <div class="iframe-placeholder">
            <span class="iframe-placeholder__text">Loading map...</span>
          </div>
        </div>
        {{ end }}
      </address>

      <div class="find-us__details">
        <div class="find-us__detail">
          <strong>OUR LOCATION</strong>
          <a
            href="{{ .Site.Params.contact.googleMapsUrl }}"
            target="_blank"
            rel="noopener noreferrer"
          >
            {{ .Site.Params.contact.address }}<br />
            {{ .Site.Params.contact.city }} {{ .Site.Params.contact.state }} {{
            .Site.Params.contact.zip }}
          </a>
        </div>

        <div class="find-us__detail">
          <strong>HOURS</strong>
          <span>{{ .Site.Params.contact.hours | safeHTML }}</span>
        </div>

        <div class="find-us__detail">
          <strong>PHONE</strong>
          <span>{{ .Site.Params.contact.phone }}</span>
        </div>
      </div>
    </div>
  </div>
</section>
{{ end }}
